$(function(){var a=(function(f){if(f==""){return{}}var e={};for(var g=0;g<f.length;++g){var h=f[g].split("=");if(h.length!=2){continue}e[h[0]]=decodeURIComponent(h[1].replace(/\+/g," "))}return e})(window.location.search.substr(1).split("&"));window.gridbrowser=function(h,e,g){var f;loc=window.location;f=loc.protocol+"//"+loc.host+"/@@gridbrowser";if(f.indexOf("?")<0){f=f+"?type="+g}else{f=f+"&type="+g}window.document.getElementById("grid-fieldname").value=h;window.open(f,"Grid Browser","width=800,height=600,status=yes,scrollbars=yes,resizable=yes")};window.gridbrowserdialog={init:function(){var h=window.opener.document.getElementById("grid-fieldname").value;h=window.opener.document.getElementById(h);var g=h.getAttribute("data-url");var e=h.getAttribute("data-use");var f=h.getAttribute("data-extra-style");if(g!==null){$("input[name=url]").val(g)}if(e!==null){$("select[name=use]").val(e)}if(f!==null){$("input[name=extra_style]").val(f)}},submit:function(){var g=$("input[name=url]").val();var e=$("select[name=use]").val();var f=$("input[name=extra_style]").val();var h=window.opener.document.getElementById("grid-fieldname").value;h=window.opener.document.getElementById(h);h.setAttribute("data-url",g);h.setAttribute("data-use",e);h.setAttribute("data-extra-style",f);window.opener.reload_tile(h);return window.close()}};window.reload_tile=function(l){var j=$(l);var k={};var h=j.attr("data-url");var e=j.attr("data-use");var f=j.attr("data-extra-style");var g=j.attr("data-sizex");k.url=h;k.use=e;k.extra_style=f;var i="/@@tile-content";if(g!==undefined){k.size_x=g}j.children(".tile-content").load(i,k).fadeIn("slow")};function c(){var e=gridster.serialize();e=JSON.stringify(e,null,2);$.post("save-grid",{tiles:e,},function(f){if(!f===true){alert("Error while saving tiles: "+f)}else{window.location.href=window.location.href}})}$("#save-tiles").click(function(){c()});$("#add-tile").popover({html:true,content:function(e){return b("/@@add-tile","tile-adder")}});function b(f,e){$.ajax({url:f,success:function(g){$("#"+e).html(g)}});return'<div id="'+e+'">Loading...</div>'}window.rm_tile=function(e){window.gridster.remove_widget(e);$("#tile-removed-alert").fadeIn().delay(1000).fadeOut("slow")};if($(".cpick").length>0){var d=undefined;$(".cpick").ColorPicker({onShow:function(e){d=$(this).parent().parent();$(e).fadeIn(500);return false},onChange:function(e,g,f){d.css("backgroundColor","#"+g)},})}});